{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/how-the-popcorn-times-api-works-popcorntime-remote-js","webpackCompilationHash":"d9cd5f45e54e95c458e2","result":{"data":{"site":{"siteMetadata":{"repoUrl":"https://github.com/giacomocerquone/giacomocerquone.com/tree/master/content/blog"}},"markdownRemark":{"id":"a719515f-8cdc-57df-88de-a9a836beddb7","excerpt":"The only people who don’t love Popcorn Time are the people who still don’t know it… and the cops of course! I think this is the truest thing I’ve ever said, it…","html":"<blockquote>\n<p><em>The only people who don’t love Popcorn Time are the people who still don’t know it… and the cops of course!</em></p>\n</blockquote>\n<p>I think this is the truest thing I’ve ever said, it seems a famous movie quote. So today we’re going to talk about the Popcorn Time’s API that allows developers to execute actions without using the desktop application. For those who don’t know what we’re talking about, Popcorn Time is an application born some time ago that gives you the possibility of watching tons of Tv Shows, Movies and Anime completely free using the p2p protocol. Given its simplicity with its user-friendly interface, you can consider it as “the Netflix killer” if you want, here is a screenshot of the interface:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/50839525017aa4838dbfa1953c821db5/c35de/popcorntime-ui.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABzpVgyJkv/8QAGxAAAQQDAAAAAAAAAAAAAAAAAAECETIDITH/2gAIAQEAAQUC4QNiG2yXXR//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAACAgMAAAAAAAAAAAAAAAAAARARIaHh/9oACAEBAAY/AsLRaOQ4/8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFRQXGR/9oACAEBAAE/IVEUObLGZWg7w7CNHB8zuG+TxMa16majk//aAAwDAQACAAMAAAAQkw//xAAXEQEAAwAAAAAAAAAAAAAAAAAAARFR/9oACAEDAQE/EFxj/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQIBAT8QV//EAB0QAQADAAEFAAAAAAAAAAAAAAEAESExQVFhodH/2gAIAQEAAT8QEqwaRdncPENgG/EVzEpsrp9IBAgFiGZEAE0K51xFTiUfU//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"popcorntime interface\"\n        title=\"popcorntime interface\"\n        src=\"/static/50839525017aa4838dbfa1953c821db5/c739e/popcorntime-ui.jpg\"\n        srcset=\"/static/50839525017aa4838dbfa1953c821db5/8ee9c/popcorntime-ui.jpg 148w,\n/static/50839525017aa4838dbfa1953c821db5/ebbe7/popcorntime-ui.jpg 295w,\n/static/50839525017aa4838dbfa1953c821db5/c739e/popcorntime-ui.jpg 590w,\n/static/50839525017aa4838dbfa1953c821db5/5413e/popcorntime-ui.jpg 885w,\n/static/50839525017aa4838dbfa1953c821db5/4efde/popcorntime-ui.jpg 1180w,\n/static/50839525017aa4838dbfa1953c821db5/c35de/popcorntime-ui.jpg 1200w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>The great thing actually is that we have also the possibility to control Popcorn Time remotely and so wherever we are, we can choose the movie, turn down the volume, toggle the fullscreen mode, search for a TV show and do every other thing you could normally do on the desktop application. We’re able to communicate remotely with PT thanks to the implementation of the json-rpc protocol to listen for method calls. So other developers created websites and apps for smartphones that allow everyone to control PT, you can<span style=\"line-height: 1.5;\"> already find an app on the Play Store. </span><span style=\"line-height: 1.5;\">In the meantime I thought to develop my own remote and so I started developing the library that would have handeld the protocol and the API’s methods:</span><span style=\"line-height: 1.5;\"> </span><a href=\"https://github.com/giacomocerquone/popcorntime_remote.js/\">popcorntime_remote.js</a> <span style=\"line-height: 1.5;\">and I’m still developing the </span><a href=\"http://popremote.giacomocerquone.com/\">popcorn time remote controller</a><span style=\"line-height: 1.5;\">, they’re both hosted on github and you’re also free to use my library or to study the remote controller’s code.</span></p>\n<p>But how does the Popcorn Time API’s work?\nFirst of all you need to know how the json-rpc works, so if you don’t know it <a href=\"https://en.wikipedia.org/wiki/JSON-RPC\">here some information</a>… actually it’s very simple, here an example of a general call with its response:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">--</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"jsonrpc\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2.0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"method\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"methodname\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"params\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"p1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"p2\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">--</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"jsonrpc\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2.0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"result\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">19</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>So now that we know how it works we’re ready to discover what methods PT let us use. Luckily we have <a href=\"https://git.popcorntime.io/popcorntime/desktop/blob/master/docs/json-rpc-api.md\">this documentation</a> hosted on gitlab that tells us all the methods and their parameters. The thing to do here is just make the json string and then perform a simple POST ajax call with javascript to the local ip of the computer that is running PT and to the right port written in the settings of the desktop application… it should be something like ”<a href=\"http://192.168.1.5:8008/\">http://192.168.1.5:8008/</a>.\nSo if we would like to call the method “enter”, that simulates the pression of the enter button, we just need to compose the string in this way:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span><span class=\"token string\">\"jsonrpc\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2.0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"method\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"enter\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"params\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>If we want to set the volume to 50%:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span><span class=\"token string\">\"jsonrpc\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2.0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"method\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"enter\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"params\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"0.5\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>And so on, but here comes what I worked for. So I stop here to explain stuff because I developed that library to keep things even easier for you because having something already written in this occasions is better, so you can focus on the application you want to build and nothing else but it’s important to say that I usually dislike libraries and always try to not use them.</p>\n<p>In fact, honestly, to use my library you don’t need to know anything about json-rpc or ajax calls, you just need to call methods and get the response (if there is a response). You can find examples about my library directly on the <a href=\"https://github.com/giacomocerquone/popcorntime_remote.js\">project page of github</a>.</p>\n<p>As soon as I finish the popcorn time remote controller I’ll do a post for that too.</p>","frontmatter":{"title":"How the Popcorn Time's API works","date":"September 20, 2015","description":"I developed this little library to let developers create their own remote controller for PopcornTime.","image":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAMAAv/aAAwDAQACEAMQAAAB3uTJKiM3/8QAGxAAAQQDAAAAAAAAAAAAAAAAAgABISIREjH/2gAIAQEAAQUCxeGVXQyLjuh5/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Bh//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPwETJ//EABoQAAICAwAAAAAAAAAAAAAAAAABELERInH/2gAIAQEABj8Co6bWNizH/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAITFRYUH/2gAIAQEAAT8hyDihBzlbq5oB7o5QaLXIFpGCKkAr1T//2gAMAwEAAgADAAAAENjP/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAwEBPxCW9cKf/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAh/9oACAECAQE/EMBJ/8QAHRABAQACAgMBAAAAAAAAAAAAAREAIUFRMWHB0f/aAAgBAQABPxAS0t2KwOX3iepUCUV37OnNIydC1OGYVgkYF0GmvueP20FvD+YavuUed/c//9k=","width":450,"height":300,"src":"/static/055c4af147f2e6097481b70774434870/f709c/popcorntime_remote_api.jpg","srcSet":"/static/055c4af147f2e6097481b70774434870/f709c/popcorntime_remote_api.jpg 1x"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"dir":"/how-the-popcorn-times-api-works-popcorntime-remote-js/how-the-popcorn-times-api-works-popcorntime-remote-js/","slug":"/blog/how-the-popcorn-times-api-works-popcorntime-remote-js","previous":{"fields":{"slug":"/blog/welcome-to-my-fresh-new-blog","dir":"/welcome-to-my-fresh-new-blog/welcome-to-my-fresh-new-blog/"},"frontmatter":{"title":"Welcome to my fresh new blog!"}},"next":{"fields":{"slug":"/blog/back-up-a-tumblr-blog-using-its-api","dir":"/back-up-a-tumblr-blog-using-its-api/back-up-a-tumblr-blog-using-its-api/"},"frontmatter":{"title":"Back up a Tumblr blog using its API"}}}}}